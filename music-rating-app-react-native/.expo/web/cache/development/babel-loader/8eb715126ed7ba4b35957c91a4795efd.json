{"ast":null,"code":"import _classCallCheck from \"@babel/runtime/helpers/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/createClass\";\nimport _inherits from \"@babel/runtime/helpers/inherits\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/getPrototypeOf\";\nvar _jsxFileName = \"/Users/kirylbeliauski/Documents/COMP SCI/software engineering/hw4/actual hw/music-rating-app-react-native/components/LoginOrCreateForm.js\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\n\nimport React, { Component } from 'react';\nimport Button from \"react-native-web/dist/exports/Button\";\nimport View from \"react-native-web/dist/exports/View\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport TextInput from \"react-native-web/dist/exports/TextInput\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport Alert from \"react-native-web/dist/exports/Alert\";\nimport { Actions } from 'react-native-router-flux';\nimport { createNativeStackNavigator } from 'react-native-screens/native-stack';\nimport axios from 'axios';\nimport AuthService from \"./Authentication\";\nimport authHeader from \"./Auth-Header\";\nimport * as SecureStore from 'expo-secure-store';\nimport { NavigationContainer } from '@react-navigation/native';\nimport { createStackNavigator } from '@react-navigation/stack';\nvar reg_url = \"http://localhost:8000/\";\n\nvar LoginOrCreateForm = function (_Component) {\n  _inherits(LoginOrCreateForm, _Component);\n\n  var _super = _createSuper(LoginOrCreateForm);\n\n  function LoginOrCreateForm(props) {\n    var _this;\n\n    _classCallCheck(this, LoginOrCreateForm);\n\n    _this = _super.call(this, props);\n    _this.state = {\n      username: '',\n      password: '',\n      error: ''\n    };\n    return _this;\n  }\n\n  _createClass(LoginOrCreateForm, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var value;\n      return _regeneratorRuntime.async(function componentDidMount$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              value = null;\n              _context.next = 3;\n              return _regeneratorRuntime.awrap(AuthService.getCurrentUser());\n\n            case 3:\n              value = _context.sent;\n              console.log(\"value is \" + value);\n\n              if (value != null) {\n                this.props.navigation.navigate(\"Home\");\n              }\n\n            case 6:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, null, this, null, Promise);\n    }\n  }, {\n    key: \"onUsernameChange\",\n    value: function onUsernameChange(text) {\n      this.setState({\n        username: text\n      });\n    }\n  }, {\n    key: \"onPasswordChange\",\n    value: function onPasswordChange(text) {\n      this.setState({\n        password: text\n      });\n    }\n  }, {\n    key: \"handleRequest\",\n    value: function handleRequest() {\n      var _this2 = this;\n\n      var e = false;\n      if (!this.props.create) AuthService.login(this.state.username, this.state.password).then(function () {\n        _this2.props.navigation.navigate(\"Home\");\n      }).catch(function (e) {\n        console.log(e);\n        Alert.alert(\"Wrong username or password\", \"Such user doesn't exist or fields were filled out incorrectly.\\\n            \\nPlease try again, filling out each field without special characters\", [{\n          text: \"OK\",\n          onPress: function onPress() {\n            return console.log(\"OK Pressed\");\n          }\n        }]);\n      });else {\n        axios.post(reg_url + \"users/\", this.state).catch(function () {\n          e = true;\n          Alert.alert(\"Wrong username or password\", \"Such user already exists or fields were filled out incorrectly.\\\n            \\nPlease try again, filling out each field without special characters, or choose a different name\", [{\n            text: \"OK\",\n            onPress: function onPress() {\n              return console.log(\"OK Pressed\");\n            }\n          }]);\n        }).then(function () {\n          console.log(e);\n\n          if (e) {\n            _this2.setState({\n              error: \"Please enter a correct username\"\n            });\n          } else {\n            AuthService.login(_this2.state.username, _this2.state.password).then(function () {\n              _this2.props.navigation.navigate(\"Home\");\n            });\n          }\n        });\n      }\n    }\n  }, {\n    key: \"renderButton\",\n    value: function renderButton() {\n      var buttonText = this.props.create ? 'Create' : 'Login';\n      return React.createElement(Button, {\n        title: buttonText,\n        onPress: this.handleRequest.bind(this),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 99,\n          columnNumber: 7\n        }\n      });\n    }\n  }, {\n    key: \"renderCreateLink\",\n    value: function renderCreateLink() {\n      var _this3 = this;\n\n      if (!this.props.create) {\n        var accountCreateTextStyle = style.accountCreateTextStyle;\n        return React.createElement(Text, {\n          style: accountCreateTextStyle,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 108,\n            columnNumber: 9\n          }\n        }, React.createElement(Text, {\n          style: {\n            color: 'blue',\n            backgroundColor: '#E8EAED',\n            padding: 15,\n            margin: 30,\n            paddingHorizontal: 20\n          },\n          onPress: function onPress() {\n            return _this3.props.navigation.navigate(\"Register\");\n          },\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 110,\n            columnNumber: 11\n          }\n        }, ' Sign-up'));\n      }\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var formContainerStyle = style.formContainerStyle,\n          fieldStyle = style.fieldStyle,\n          textInputStyle = style.textInputStyle,\n          buttonContainerStyle = style.buttonContainerStyle,\n          accountCreateContainerStyle = style.accountCreateContainerStyle;\n      return React.createElement(View, {\n        style: {\n          flex: 1,\n          backgroundColor: 'white'\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 136,\n          columnNumber: 7\n        }\n      }, React.createElement(View, {\n        style: formContainerStyle,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 137,\n          columnNumber: 9\n        }\n      }, React.createElement(View, {\n        style: fieldStyle,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 138,\n          columnNumber: 11\n        }\n      }, React.createElement(TextInput, {\n        placeholder: \"username\",\n        autoCorrect: false,\n        autoCapitalize: \"none\",\n        onChangeText: this.onUsernameChange.bind(this),\n        style: textInputStyle,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 139,\n          columnNumber: 13\n        }\n      })), React.createElement(View, {\n        style: fieldStyle,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 147,\n          columnNumber: 11\n        }\n      }, React.createElement(TextInput, {\n        secureTextEntry: true,\n        autoCapitalize: \"none\",\n        autoCorrect: false,\n        placeholder: \"password\",\n        onChangeText: this.onPasswordChange.bind(this),\n        style: textInputStyle,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 148,\n          columnNumber: 13\n        }\n      }))), React.createElement(View, {\n        style: buttonContainerStyle,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 158,\n          columnNumber: 9\n        }\n      }, this.renderButton(), React.createElement(View, {\n        style: accountCreateContainerStyle,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 160,\n          columnNumber: 11\n        }\n      }, this.renderCreateLink())));\n    }\n  }]);\n\n  return LoginOrCreateForm;\n}(Component);\n\nvar style = StyleSheet.create({\n  formContainerStyle: {\n    backgroundColor: '#E8EAED',\n    flex: 1,\n    flexDirection: 'column',\n    alignItems: 'center',\n    justifyContent: 'center',\n    paddingHorizontal: 20\n  },\n  textInputStyle: {\n    backgroundColor: '#FFF',\n    padding: 15,\n    borderRadius: 10,\n    flexDirection: 'row',\n    alignItems: 'center',\n    justifyContent: 'space-between',\n    marginBottom: 20,\n    flex: 1\n  },\n  fieldStyle: {\n    flexDirection: 'row',\n    justifyContent: 'center'\n  },\n  buttonContainerStyle: {\n    backgroundColor: '#FFF',\n    padding: 30,\n    borderRadius: 10,\n    alignItems: 'center',\n    justifyContent: 'space-between',\n    marginBottom: 50\n  },\n  accountCreateTextStyle: {\n    color: 'black'\n  },\n  accountCreateContainerStyle: {\n    padding: 25,\n    alignItems: 'center'\n  }\n});\nexport default LoginOrCreateForm;","map":{"version":3,"sources":["/Users/kirylbeliauski/Documents/COMP SCI/software engineering/hw4/actual hw/music-rating-app-react-native/components/LoginOrCreateForm.js"],"names":["React","Component","Actions","createNativeStackNavigator","axios","AuthService","authHeader","SecureStore","NavigationContainer","createStackNavigator","reg_url","LoginOrCreateForm","props","state","username","password","error","value","getCurrentUser","console","log","navigation","navigate","text","setState","e","create","login","then","catch","Alert","alert","onPress","post","buttonText","handleRequest","bind","accountCreateTextStyle","style","color","backgroundColor","padding","margin","paddingHorizontal","formContainerStyle","fieldStyle","textInputStyle","buttonContainerStyle","accountCreateContainerStyle","flex","onUsernameChange","onPasswordChange","renderButton","renderCreateLink","StyleSheet","flexDirection","alignItems","justifyContent","borderRadius","marginBottom"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport { Button, View, Text, TextInput, StyleSheet, Alert } from 'react-native';\nimport { Actions } from 'react-native-router-flux';\nimport { createNativeStackNavigator } from 'react-native-screens/native-stack';\nimport axios from 'axios';\nimport AuthService from \"./Authentication\";\nimport authHeader from './Auth-Header';\nimport * as SecureStore from 'expo-secure-store';\nimport { NavigationContainer } from '@react-navigation/native';\nimport { createStackNavigator } from '@react-navigation/stack';\n\nconst reg_url = \"http://localhost:8000/\";\n\nclass LoginOrCreateForm extends Component {\n    constructor(props) {\n        super(props)\n        this.state = {\n            username: '',\n            password: '',\n            error: ''\n          }\n    }\n\n    async componentDidMount() {\n      var value = null\n      value = await AuthService.getCurrentUser()\n        console.log(\"value is \" + value)\n        if (value != null) {\n          this.props.navigation.navigate(\"Home\")\n        }\n        }\n        \n          \n    \n        \n      \n      \n\n  onUsernameChange(text) {\n    this.setState({ username: text });\n  }\n\n  onPasswordChange(text) {\n    this.setState({ password: text });\n  }\n\n  handleRequest() {\n    var e = false\n    if(!this.props.create)\n        AuthService.login(this.state.username, this.state.password).then(() =>{\n            this.props.navigation.navigate(\"Home\")\n\n        })\n        .catch((e) => {\n          console.log(e);\n          Alert.alert(\n            \"Wrong username or password\",\n            \"Such user doesn't exist or fields were filled out incorrectly.\\\n            \\nPlease try again, filling out each field without special characters\",\n            [\n              { text: \"OK\", onPress: () => console.log(\"OK Pressed\") }\n            ]\n          );\n        })\n    else {\n      axios.post(reg_url + \"users/\", this.state)\n        .catch(() => {\n          e = true\n          Alert.alert(\n            \"Wrong username or password\",\n            \"Such user already exists or fields were filled out incorrectly.\\\n            \\nPlease try again, filling out each field without special characters, or choose a different name\",\n            [\n              { text: \"OK\", onPress: () => console.log(\"OK Pressed\") }\n            ]\n          );\n        })\n        .then(() =>{\n          console.log(e)\n          if (e) {\n            this.setState({ error: \"Please enter a correct username\"})\n          } else {\n            AuthService.login(this.state.username, this.state.password).then(() =>{\n              this.props.navigation.navigate(\"Home\")\n          })\n          }\n          \n        });\n    }\n        \n    \n    \n  }\n\n  renderButton() {\n    const buttonText = this.props.create ? 'Create' : 'Login';\n\n    return (\n      <Button title={buttonText} onPress={this.handleRequest.bind(this)}/>\n    );\n  }\n\n\n  renderCreateLink() {\n    if (!this.props.create) {\n      const { accountCreateTextStyle } = style;\n      return (\n        <Text style={accountCreateTextStyle}>\n          \n          <Text style={{\n             color: 'blue',\n             backgroundColor: '#E8EAED',\n             padding: 15,\n             margin: 30,\n             paddingHorizontal: 20,\n              }} onPress={() => this.props.navigation.navigate(\"Register\")}>\n            {' Sign-up'}\n          </Text>\n        </Text>\n      );\n    }\n  }\n\n  render() {\n    const {\n      formContainerStyle,\n      fieldStyle,\n      textInputStyle,\n      buttonContainerStyle,\n      accountCreateContainerStyle\n    } = style;\n\n    \n\n    return (\n      <View style={{ flex: 1, backgroundColor: 'white' }}>\n        <View style={formContainerStyle}>\n          <View style={fieldStyle}>\n            <TextInput\n              placeholder=\"username\"\n              autoCorrect={false}\n              autoCapitalize=\"none\"\n              onChangeText={this.onUsernameChange.bind(this)}\n              style={textInputStyle}\n            />\n          </View>\n          <View style={fieldStyle}>\n            <TextInput\n              secureTextEntry\n              autoCapitalize=\"none\"\n              autoCorrect={false}\n              placeholder=\"password\"\n              onChangeText={this.onPasswordChange.bind(this)}\n              style={textInputStyle}\n            />\n          </View>\n        </View>\n        <View style={buttonContainerStyle}>\n          {this.renderButton()}\n          <View style={accountCreateContainerStyle}>\n            {this.renderCreateLink()}\n          </View>\n        </View>\n      </View>\n    );\n  }\n}\n\n\nconst style = StyleSheet.create({\n  formContainerStyle: {\n\n    backgroundColor: '#E8EAED',\n    flex: 1,\n    flexDirection: 'column',\n    alignItems: 'center',\n    justifyContent: 'center',\n    paddingHorizontal: 20,\n  },\n  textInputStyle: {\n    backgroundColor: '#FFF',\n    padding: 15,\n    borderRadius: 10,\n    flexDirection: 'row',\n    alignItems: 'center',\n    justifyContent: 'space-between',\n    marginBottom: 20,\n    flex: 1,\n  },\n  fieldStyle: {\n    flexDirection: 'row',\n    justifyContent: 'center'\n  },\n  buttonContainerStyle: {\n    backgroundColor: '#FFF',\n    padding: 30,\n    borderRadius: 10,\n    alignItems: 'center',\n    justifyContent: 'space-between',\n    marginBottom: 50,\n  },\n  accountCreateTextStyle: {\n    color: 'black'\n  },\n  accountCreateContainerStyle: {\n    padding: 25,\n    alignItems: 'center'\n  }\n});\n\n\nexport default LoginOrCreateForm;"]},"metadata":{},"sourceType":"module"}