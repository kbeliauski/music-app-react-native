{"ast":null,"code":"import _classCallCheck from \"@babel/runtime/helpers/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/createClass\";\nimport _inherits from \"@babel/runtime/helpers/inherits\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/getPrototypeOf\";\nvar _jsxFileName = \"/Users/kirylbeliauski/Documents/COMP SCI/software engineering/hw4/actual hw/music-rating-app-react-native/components/Home.js\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\n\nimport 'react-native-gesture-handler';\nimport React, { Component } from 'react';\nimport View from \"react-native-web/dist/exports/View\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport authHeader from \"./Auth-Header\";\nimport axios from \"axios\";\nimport SongList from \"./SongList\";\nvar API_URL = 'http://localhost:8000/api/songs/';\nvar song_url = \"http://localhost:8000/api/ratings/\";\n\nvar Home = function (_Component) {\n  _inherits(Home, _Component);\n\n  var _super = _createSuper(Home);\n\n  function Home(props) {\n    var _this;\n\n    _classCallCheck(this, Home);\n\n    _this = _super.call(this, props);\n\n    _this.resetState = function () {\n      _this.getSongs();\n\n      _this.getRatings();\n    };\n\n    _this.state = {\n      songs: [],\n      ratings: [],\n      logged_in: false\n    };\n    return _this;\n  }\n\n  _createClass(Home, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this.resetState();\n    }\n  }, {\n    key: \"getSongs\",\n    value: function getSongs() {\n      var _this2 = this;\n\n      var headers;\n      return _regeneratorRuntime.async(function getSongs$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _context.prev = 0;\n              _context.next = 3;\n              return _regeneratorRuntime.awrap(authHeader());\n\n            case 3:\n              headers = _context.sent;\n              axios.get(API_URL, {\n                headers: headers\n              }).then(function (res) {\n                return _this2.setState({\n                  songs: res.data\n                });\n              }).catch(function () {\n                _this2.setState({\n                  logged_in: false\n                });\n              });\n              _context.next = 10;\n              break;\n\n            case 7:\n              _context.prev = 7;\n              _context.t0 = _context[\"catch\"](0);\n              console.log(_context.t0);\n\n            case 10:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, null, null, [[0, 7]], Promise);\n    }\n  }, {\n    key: \"getRatings\",\n    value: function getRatings() {\n      var _this3 = this;\n\n      var headers;\n      return _regeneratorRuntime.async(function getRatings$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              _context2.prev = 0;\n              _context2.next = 3;\n              return _regeneratorRuntime.awrap(authHeader());\n\n            case 3:\n              headers = _context2.sent;\n              axios.get(song_url, {\n                headers: headers\n              }).then(function (res) {\n                return _this3.setState({\n                  ratings: res.data\n                });\n              });\n              _context2.next = 10;\n              break;\n\n            case 7:\n              _context2.prev = 7;\n              _context2.t0 = _context2[\"catch\"](0);\n              console.log(_context2.t0);\n\n            case 10:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, null, null, [[0, 7]], Promise);\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      return React.createElement(View, {\n        style: {\n          flex: 1\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 59,\n          columnNumber: 7\n        }\n      }, React.createElement(SongList, {\n        resetState: this.resetState,\n        navigation: this.props.navigation,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 60,\n          columnNumber: 9\n        }\n      }));\n    }\n  }]);\n\n  return Home;\n}(Component);\n\nexport default Home;","map":{"version":3,"sources":["/Users/kirylbeliauski/Documents/COMP SCI/software engineering/hw4/actual hw/music-rating-app-react-native/components/Home.js"],"names":["React","Component","authHeader","axios","SongList","API_URL","song_url","Home","props","resetState","getSongs","getRatings","state","songs","ratings","logged_in","headers","get","then","res","setState","data","catch","console","log","flex","navigation"],"mappings":";;;;;;;;;;;;AAAA,OAAO,8BAAP;AACA,OAAOA,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;;;AAEA,OAAOC,UAAP;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,OAAOC,QAAP;AAGA,IAAMC,OAAO,GAAG,kCAAhB;AACA,IAAMC,QAAQ,GAAG,oCAAjB;;IAGMC,I;;;;;AACJ,gBAAYC,KAAZ,EAAmB;AAAA;;AAAA;;AACjB,8BAAMA,KAAN;;AADiB,UAsCnBC,UAtCmB,GAsCN,YAAM;AACjB,YAAKC,QAAL;;AACA,YAAKC,UAAL;AACD,KAzCkB;;AAEjB,UAAKC,KAAL,GAAa;AACbC,MAAAA,KAAK,EAAE,EADM;AAEbC,MAAAA,OAAO,EAAE,EAFI;AAGbC,MAAAA,SAAS,EAAE;AAHE,KAAb;AAFiB;AAMjB;;;;WAEF,6BAAoB;AAClB,WAAKN,UAAL;AACD;;;WAED;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,+CAE0BP,UAAU,EAFpC;;AAAA;AAEUc,cAAAA,OAFV;AAGIb,cAAAA,KAAK,CAACc,GAAN,CAAUZ,OAAV,EAAmB;AAAEW,gBAAAA,OAAO,EAAPA;AAAF,eAAnB,EACCE,IADD,CACM,UAAAC,GAAG;AAAA,uBAAI,MAAI,CAACC,QAAL,CAAc;AAAEP,kBAAAA,KAAK,EAAEM,GAAG,CAACE;AAAb,iBAAd,CAAJ;AAAA,eADT,EAECC,KAFD,CAEO,YAAM;AACX,gBAAA,MAAI,CAACF,QAAL,CAAe;AACbL,kBAAAA,SAAS,EAAE;AADE,iBAAf;AAGD,eAND;AAHJ;AAAA;;AAAA;AAAA;AAAA;AAWIQ,cAAAA,OAAO,CAACC,GAAR;;AAXJ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;WAgBA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,+CAE0BtB,UAAU,EAFpC;;AAAA;AAEUc,cAAAA,OAFV;AAGIb,cAAAA,KAAK,CAACc,GAAN,CAAUX,QAAV,EAAoB;AAAEU,gBAAAA,OAAO,EAAPA;AAAF,eAApB,EAAiCE,IAAjC,CAAsC,UAAAC,GAAG;AAAA,uBAAI,MAAI,CAACC,QAAL,CAAc;AAAEN,kBAAAA,OAAO,EAAEK,GAAG,CAACE;AAAf,iBAAd,CAAJ;AAAA,eAAzC;AAHJ;AAAA;;AAAA;AAAA;AAAA;AAKIE,cAAAA,OAAO,CAACC,GAAR;;AALJ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;WAeA,kBAAS;AACP,aACE,oBAAC,IAAD;AAAM,QAAA,KAAK,EAAE;AAAEC,UAAAA,IAAI,EAAE;AAAR,SAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE,oBAAC,QAAD;AAAU,QAAA,UAAU,EAAE,KAAKhB,UAA3B;AAAuC,QAAA,UAAU,EAAI,KAAKD,KAAL,CAAWkB,UAAhE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QADF,CADF;AAKD;;;;EAlDgBzB,S;;AAsDnB,eAAeM,IAAf","sourcesContent":["import 'react-native-gesture-handler';\nimport React, { Component } from 'react';\nimport { View, Text } from 'react-native';\nimport authHeader from './Auth-Header';\nimport axios from \"axios\";\nimport SongList from \"./SongList\"\n\n\nconst API_URL = 'http://localhost:8000/api/songs/'\nconst song_url = \"http://localhost:8000/api/ratings/\"\n\n\nclass Home extends Component {\n  constructor(props) {\n    super(props)\n    this.state = {\n    songs: [],\n    ratings: [],\n    logged_in: false\n  }}\n\n  componentDidMount() {\n    this.resetState();\n  }\n\n  async getSongs() {\n    try {\n      const headers = await authHeader() \n      axios.get(API_URL, { headers } )\n      .then(res => this.setState({ songs: res.data}))\n      .catch(() => {\n        this.setState ({\n          logged_in: false\n        })\n      })\n    } catch (e) {\n      console.log(e);\n    }\n    \n  };\n\n  async getRatings () {\n    try {\n      const headers = await authHeader()\n      axios.get(song_url, { headers }).then(res => this.setState({ ratings: res.data }));\n    } catch (e) {\n      console.log(e);\n    }\n    \n  };\n\n  resetState = () => {\n    this.getSongs();\n    this.getRatings();\n  };\n\n  render() {\n    return (\n      <View style={{ flex: 1 }}>\n        <SongList resetState={this.resetState} navigation = {this.props.navigation} />\n      </View>\n    );\n  }\n\n}\n\nexport default Home;"]},"metadata":{},"sourceType":"module"}